# h4 walktrough #


![h4alotus](https://thumbs.gfycat.com/AliveAdmirableEidolonhelvum-max-1mb.gif)


# z) Lue artikkelit ja katso videot, tee kustakin muistiinpanot (muutama ranskalainen viiva per artikkeli/video). Tässä z-kohdassa ei tarvitse tehdä mitään kokeita koneella. #

## Kaksi vapaavalintaista walktrough-artikkelia. ##

#### HackTheBox - Tabby  ####

- Linux kone, missä juoksee apache tomcat ja ssh servu.
- Nmapilla taas tiedustelu ja kohdekoneen webbipalvelimeen tutustuminen selaimella.
- Gobusteri PHP bruteforsaus wordlistalla.
- Huonosti suojattuun tomcatservuun payload:n ajaminen web adminina.
- Reverse shellillä root containerin ajaminen lxc:n avulla.

Lähde: https://0xdf.gitlab.io/2020/11/07/htb-tabby.html

#### HackTheBox - Bashed ####

- Tiedustelu Nmap:lla palvelimelta.
- Bruteforsaus gobusterilla josta löytyy tiedosto, mitä klikkaamalla saa bashin auki servulta.
- Shell:n päivitys phpbashistä komennolla.
- Rootti oikeudet ajamalla scripti:ä ilman kunnollista serverikovettamista.

Lähde: https://0xdf.gitlab.io/2018/04/29/htb-bashed.html

## Kaksi vapaavalintaista läpikävelyvideota. ##

#### HackTheBox - Sauna ####

- Sauna boxi on windows kone, jossa on webbipalvelin (Käyttää AD:tä).
- Koneen korkkaamiseen voi käyttää boolean-tyyppistä esivarmennus metodia.
- Koneelta dumpataan omalle koneelle käyttäjätiedot, josta tiedot muutetaan luku- ja käyttäjäkelpoiseksi dataksi.
- Metodina käyttäjätietojen validoimiseksi käytetään AS-REP roasting:ia.
- Salasanatiivisteet murretaan tiedot saatuaan.

Lähde: https://www.youtube.com/watch?v=uLNpR3AnE-Y

Lähde1: https://stealthbits.com/blog/cracking-active-directory-passwords-with-as-rep-roasting/

#### HackTheBox - Traceback ####

- Pitää selvittää miten hakkeri on päässyt koneelle roottina.
- Koneelle pitää kumminkin tunkeutua itse ja eräs työkalu, mitä voidaan käyttää on gobuster. (directoryjen tarkasteluun mm.)
- Koneelle tunkeutuessa pitää käyttää ensin reverse shelliä.
- Koneella pystyy Suorittamaan ja lukemaan koodia, joten koneelle täytyy saada tiedostot, jota juoksuttaa. Apuna voidaan käyttää linPeas:iä selvittämään koneen "rakennetta".
- Reverse shellillä pitää muokata serverin Banneria juoksuttamaan koodia, jotta saadaan ssh yhteys juureen.

Lähde: https://www.youtube.com/watch?v=OI7PbBT589E

Lähde1: https://tools.kali.org/web-applications/gobuster 

# a) Etsi ja kokeile 5 uutta työkalua jostain lukemastasi/katsomastasi läpikävelystä. #

Kokeillessani päätin lähteä ensin laittamaan linux palvelimeni ja kalilinux hakkerikoneeni valmiiksi. Tein alla olevan kuvan mukaisen infran.
Kyseessä on siis closedshell network, josta ei pääse ulkoverkkoon.

![infra](https://github.com/samuli-salonen/-Tunkeutumistestaus-ict4tn027-3006-ti-2020s/blob/main/h4/infra.png)

Servu on tässä tapauksessa xubuntu 20.4 LTS, jossa on web-palvelin, ssh ja ftp. Servukoneen ip on: ```10.0.0.64```. Tunkeutumiseen käytän kali 2020.04:sta, jonka ip on: ```10.0.0.61```. 


### Nmap ###

Nmap komentona käytin tässä tapauksessa: ``` sudo nmap --top-ports 1000 -A 10.0.0.64 -oA 64skannaus ```, joka skannaa 1000 suosituinta porttia ja ajaa myös scripteinä version haun, OS fingerprintin, yms. Komento myös tekee kolme eri output tiedostoa nimellä 64skannaus. Apuna käytän wiresharkkia tarpeen mukaan.

Lähde: https://nmap.org/

### Eyewitness ###

Lähde: https://tools.kali.org/information-gathering/eyewitness

### gobuster ###

Lähde: https://redteamtutorials.com/2018/11/19/gobuster-cheatsheet/

### nikto ###

Lähde: https://en.wikipedia.org/wiki/Nikto_(vulnerability_scanner)

### Metasploit ###

Lähde: https://www.metasploit.com/



# b) Tiedustele ja analysoi 5 htb konetta perusteellisesti. Käytä ainakin nmap-porttiskanneria. Halutessasi voit käyttää lisäksi muita työkaluja, kuten eyewitness, nikto, wpscan, gobuster, gvm (openvas), msfconsole, ffuf, zaproxy, mitmproxy, sqlmap, searchsploit, exploitdb... #

Tehtävää päätin lähestyä Nmap:lla ja eyewitness:llä, joilla saa pintaa käsittelevän kuvan lisäksi myös kuvan mahdollisista palvelukäyttöliittymistä. Päätin analysoida 5 helppoa konetta HTB:n verkossa. Tässä piti taas varmistaa tutkittavan verkon sallittu ip avaruus, joka on tätä kirjottaessa: ```10.10.10.1-254```.

### HTB -     ###

# c) Nimeä 1-3 walktrough:ta, joissa tunkeudutaan samantapaisiin palveluihin, joita käsittelit kohdassa b. Tiivistä artikkelit muutamalla bulletilla. Mitä työkaluja hyökkääjät käyttivät? Kokeile työkaluja (1-3 työkalua), raportoi ja arvioi tulokset. #

tekstiä


Lähde läksyihin: http://terokarvinen.com/2020/tunkeutumistestaus-kurssi-pentest-course-ict4tn027-3006-autumn-2020/
